var ms=Object.defineProperty;var gs=(a,O,N)=>O in a?ms(a,O,{enumerable:!0,configurable:!0,writable:!0,value:N}):a[O]=N;var S=(a,O,N)=>gs(a,typeof O!="symbol"?O+"":O,N);(function(a,O){typeof exports=="object"&&typeof module<"u"?O(require("vue")):typeof define=="function"&&define.amd?define(["vue"],O):(a=typeof globalThis<"u"?globalThis:a||self,O(a.Vue))})(this,function(a){"use strict";/*!
 * vue-global-events v3.0.1
 * (c) 2019-2023 Eduardo San Martin Morote, Damian Dulisz
 * Released under the MIT License.
 */let O;function N(){return O??(O=/msie|trident/.test(window.navigator.userAgent.toLowerCase()))}const ft=/^on(\w+?)((?:Once|Capture|Passive)*)$/,ht=/[OCP]/g;function dt(e){return e?N()?e.includes("Capture"):e.replace(ht,",$&").toLowerCase().slice(1).split(",").reduce((r,o)=>(r[o]=!0,r),{}):void 0}const pt=a.defineComponent({name:"GlobalEvents",props:{target:{type:String,default:"document"},filter:{type:[Function,Array],default:()=>()=>!0},stop:Boolean,prevent:Boolean},setup(e,{attrs:t}){let r=Object.create(null);const o=a.ref(!0);return a.onActivated(()=>{o.value=!0}),a.onDeactivated(()=>{o.value=!1}),a.onMounted(()=>{Object.keys(t).filter(n=>n.startsWith("on")).forEach(n=>{const l=t[n],f=Array.isArray(l)?l:[l],u=n.match(ft);if(!u){__DEV__&&console.warn(`[vue-global-events] Unable to parse "${n}". If this should work, you should probably open a new issue on https://github.com/shentao/vue-global-events.`);return}let[,p,g]=u;p=p.toLowerCase();const m=f.map(y=>b=>{const T=Array.isArray(e.filter)?e.filter:[e.filter];o.value&&T.every(A=>A(b,y,p))&&(e.stop&&b.stopPropagation(),e.prevent&&b.preventDefault(),y(b))}),h=dt(g);m.forEach(y=>{window[e.target].addEventListener(p,y,h)}),r[n]=[m,p,h]})}),a.onBeforeUnmount(()=>{for(const n in r){const[l,f,u]=r[n];l.forEach(p=>{window[e.target].removeEventListener(f,p,u)})}r={}}),()=>null}});var H=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ae(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function yt(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var Q=yt,mt=typeof H=="object"&&H&&H.Object===Object&&H,gt=mt,_t=gt,bt=typeof self=="object"&&self&&self.Object===Object&&self,vt=_t||bt||Function("return this")(),W=vt,wt=W,$t=function(){return wt.Date.now()},St=$t,Ft=/\s/;function Ot(e){for(var t=e.length;t--&&Ft.test(e.charAt(t)););return t}var jt=Ot,Tt=jt,Ct=/^\s+/;function At(e){return e&&e.slice(0,Tt(e)+1).replace(Ct,"")}var Et=At,It=W,xt=It.Symbol,se=xt,$e=se,Se=Object.prototype,Pt=Se.hasOwnProperty,Rt=Se.toString,Y=$e?$e.toStringTag:void 0;function Dt(e){var t=Pt.call(e,Y),r=e[Y];try{e[Y]=void 0;var o=!0}catch{}var n=Rt.call(e);return o&&(t?e[Y]=r:delete e[Y]),n}var Lt=Dt,kt=Object.prototype,Mt=kt.toString;function Ut(e){return Mt.call(e)}var Bt=Ut,Fe=se,Nt=Lt,Ht=Bt,qt="[object Null]",Gt="[object Undefined]",Oe=Fe?Fe.toStringTag:void 0;function zt(e){return e==null?e===void 0?Gt:qt:Oe&&Oe in Object(e)?Nt(e):Ht(e)}var le=zt;function Vt(e){return e!=null&&typeof e=="object"}var X=Vt,Kt=le,Jt=X,Wt="[object Symbol]";function Yt(e){return typeof e=="symbol"||Jt(e)&&Kt(e)==Wt}var Zt=Yt,Qt=Et,je=Q,Xt=Zt,Te=NaN,er=/^[-+]0x[0-9a-f]+$/i,tr=/^0b[01]+$/i,rr=/^0o[0-7]+$/i,nr=parseInt;function or(e){if(typeof e=="number")return e;if(Xt(e))return Te;if(je(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=je(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=Qt(e);var r=tr.test(e);return r||rr.test(e)?nr(e.slice(2),r?2:8):er.test(e)?Te:+e}var ir=or,ar=Q,ce=St,Ce=ir,sr="Expected a function",lr=Math.max,cr=Math.min;function ur(e,t,r){var o,n,l,f,u,p,g=0,m=!1,h=!1,y=!0;if(typeof e!="function")throw new TypeError(sr);t=Ce(t)||0,ar(r)&&(m=!!r.leading,h="maxWait"in r,l=h?lr(Ce(r.maxWait)||0,t):l,y="trailing"in r?!!r.trailing:y);function b(v){var j=o,I=n;return o=n=void 0,g=v,f=e.apply(I,j),f}function T(v){return g=v,u=setTimeout(K,t),m?b(v):f}function A(v){var j=v-p,I=v-g,Z=t-j;return h?cr(Z,l-I):Z}function V(v){var j=v-p,I=v-g;return p===void 0||j>=t||j<0||h&&I>=l}function K(){var v=ce();if(V(v))return J(v);u=setTimeout(K,A(v))}function J(v){return u=void 0,y&&o?b(v):(o=n=void 0,f)}function M(){u!==void 0&&clearTimeout(u),g=0,o=p=n=u=void 0}function be(){return u===void 0?f:J(ce())}function U(){var v=ce(),j=V(v);if(o=arguments,n=this,p=v,j){if(u===void 0)return T(p);if(h)return clearTimeout(u),u=setTimeout(K,t),b(p)}return u===void 0&&(u=setTimeout(K,t)),f}return U.cancel=M,U.flush=be,U}var fr=ur;const ue=ae(fr),hr=a.defineComponent({__name:"go-plaid-scope",props:{scopeName:{},locals:{},form:{},closer:{},fullscreen:{},setup:{},useDebounce:{},observers:{}},emits:["change-debounced"],setup(e,{emit:t}){const r=e,o=t;let n=a.inject("locals",{});if(r.locals!==void 0){let h={$parent:n};a.isProxy(r.locals)?h=r.locals:Array.isArray(r.locals)?h=a.reactive(Object.assign(h,...r.locals)):h=a.reactive({...h,...r.locals}),n=h,a.provide("locals",n)}let l=a.inject("form");if(r.form!==void 0){let h={$parent:l};a.isProxy(r.form)?h=r.form:Array.isArray(r.form)?h=a.reactive(Object.assign(h,...r.form)):h=a.reactive({...h,...r.form}),l=h,a.provide("form",l)}let f=a.inject("closer",{});if(r.closer!==void 0){let h={$parent:f,show:!1};a.isProxy(r.closer)?h=r.closer:Array.isArray(r.closer)?h=a.reactive(Object.assign(h,...r.closer)):h=a.reactive({...h,...r.closer}),f=h,a.provide("closer",f)}let u=a.inject("fullscreen",{});if(r.fullscreen!==void 0){let h={$parent:u,active:!1};a.isProxy(r.fullscreen)?h=r.fullscreen:Array.isArray(r.fullscreen)?h=a.reactive(Object.assign(h,...r.fullscreen)):h=a.reactive({...h,...r.fullscreen}),u=h,a.provide("fullscreen",u)}const p=a.inject("vars"),g=a.inject("plaid");Array.isArray(r.setup)&&new Function("vars","locals","form","plaid","closer","fullscreen",r.setup[0])(p,n,l,g,f,u);function m(){!r.observers||r.observers.length==0||a.watch(()=>p==null?void 0:p.__notification,h=>{var y;h&&((y=r.observers)==null||y.forEach(b=>{if((h==null?void 0:h.name)===b.name){let T;try{T=typeof h.payload=="string"?JSON.parse(h.payload):h.payload}catch{T=h.payload}try{new Function("name","payload","vars","locals","form","plaid","closer","fullscreen",b.script)(b.name,T,p,n,l,g,f,u)}catch(A){console.error("Error executing observer script:",A)}}}))})}return a.onMounted(()=>{setTimeout(()=>{if(r.useDebounce){const h=r.useDebounce,y=ue(b=>{o("change-debounced",b)},h);a.watch(n,(b,T)=>{y({locals:b,form:l,oldLocals:T,oldForm:l})})}},0),m()}),(h,y)=>a.renderSlot(h.$slots,"default",{locals:a.unref(n),form:a.unref(l),plaid:a.unref(g),vars:a.unref(p),closer:a.unref(f),setup:h.setup,fullscreen:a.unref(u)})}});function fe(e,t,r={},o=a.ref()){return a.defineComponent({setup(){const n=a.inject("plaid"),l=a.inject("vars"),f=a.inject("closer"),u=a.inject("fullscreen"),p=a.inject("isFetching"),g=a.inject("updateRootTemplate"),m=a.reactive({});return m.plaid=n,m.vars=l,m.closer=f,m.fullscreen=u,m.isFetching=p,m.updateRootTemplate=g,m.form=t,m.locals=r,m},mounted(){this.$nextTick(()=>{this.$el&&this.$el.style&&this.$el.style.height&&(o.value.style.height=this.$el.style.height)})},template:e})}const dr=["id"],pr=a.defineComponent({__name:"go-plaid-portal",props:{loader:{},content:{},visible:{type:Boolean},afterLoaded:{type:Function},portalName:{},form:{},locals:{},methods:{},data:{},autoReloadInterval:{},raw:{type:Boolean}},setup(e){window.__goplaid=window.__goplaid??{},window.__goplaid.portals=window.__goplaid.portals??{};const t=a.ref(),r=e,o=a.shallowRef(null),n=a.ref(0),l=a.useSlots();let f=a.inject("locals",{});r.locals!==void 0&&(a.isProxy(r.locals)||(f=a.reactive({$parent:f,...r.locals}))),a.provide("locals",f);let u=a.inject("form",{});r.form!==void 0&&(a.isProxy(r.form)||(u=a.reactive({$parent:u,...r.form}))),a.provide("form",u);const p=a.reactive({$parent:a.inject("$portal",null),name:r.portalName,form:u,locals:f,value:t});a.provide("$portal",p);const g=h=>{o.value=fe(h,u,f,t)},m=()=>{if(l.default){o.value=fe('<slot :form="form" :locals="locals"></slot>',u,f,t);return}const h=r.content;if(h){g(h);return}const y=r.loader;y&&y.loadPortalBody(!0).form(u).go().then(b=>{g(b.body)})};return a.onMounted(()=>{const h=r.portalName;h&&(window.__goplaid.portals[h]={portalName:r.portalName,updatePortalTemplate:g,reload:m}),m()}),a.onUpdated(()=>{if(r.autoReloadInterval&&n.value==0){const h=parseInt(r.autoReloadInterval+"");if(h==0)return;n.value=setInterval(()=>{m()},h)}n.value&&n.value>0&&r.autoReloadInterval==0&&(clearInterval(n.value),n.value=0)}),a.onBeforeUnmount(()=>{r.portalName&&delete window.__goplaid.portals[r.portalName],n.value&&n.value>0&&clearInterval(n.value)}),(h,y)=>h.raw?(a.openBlock(),a.createElementBlock(a.Fragment,{key:0},[o.value?(a.openBlock(),a.createBlock(a.resolveDynamicComponent(o.value),{key:0},{default:a.withCtx(()=>[a.renderSlot(h.$slots,"default",{form:a.unref(u),locals:a.unref(f)})]),_:3})):a.createCommentVNode("",!0)],64)):(a.openBlock(),a.createElementBlock(a.Fragment,{key:1},[h.visible?(a.openBlock(),a.createElementBlock("div",{key:0,class:"go-plaid-portal",id:h.portalName&&"portal--"+h.portalName,ref_key:"portal",ref:t},[o.value?(a.openBlock(),a.createBlock(a.resolveDynamicComponent(o.value),{key:0},{default:a.withCtx(()=>[a.renderSlot(h.$slots,"default",{form:a.unref(u),locals:a.unref(f)})]),_:3})):a.createCommentVNode("",!0)],8,dr)):a.createCommentVNode("",!0)],64))}}),yr=a.defineComponent({__name:"go-plaid-run-script",props:{script:{type:Function,required:!0}},setup(e){const t=e;return a.onMounted(()=>{t.script({isProxy:a.isProxy,isReactive:a.isReactive,isRef:a.isRef,ref:a.ref})}),(r,o)=>null}}),mr=a.defineComponent({__name:"user-component",props:{scope:{type:Object,default:()=>{}},assign:{type:Array,default:()=>[]},setup:{type:Function,default:()=>{}}},emits:["mounted","beforeUnmount"],setup(e,{emit:t}){const r=e;r.assign.forEach(f=>{Object.assign(f[0],f[1])});const o=t;let n=a.ref({});r.scope&&(n=a.ref(r.scope));const l={watch:a.watch,isProxy:a.isProxy,isReactive:a.isReactive,isRef:a.isRef,ref:a.ref,reactive:a.reactive,debounce:ue,computed:a.computed,inject:a.inject,provide:a.provide,scope:r.scope,$scope:n,window};if(r.setup){const f=()=>{const u=r.setup;u({...l,func:f})};f()}return a.onMounted(()=>{o("mounted",l)}),a.onBeforeUnmount(()=>{o("beforeUnmount",l)}),(f,u)=>r.scope?a.renderSlot(f.$slots,"default",a.normalizeProps(a.mergeProps({key:0},a.unref(n)))):a.renderSlot(f.$slots,"default",{key:1})}});/*! formdata-polyfill. MIT License. Jimmy W?rting <https://jimmy.warting.se/opensource> */(function(){var e;function t(i){var s=0;return function(){return s<i.length?{done:!1,value:i[s++]}:{done:!0}}}var r=typeof Object.defineProperties=="function"?Object.defineProperty:function(i,s,c){return i==Array.prototype||i==Object.prototype||(i[s]=c.value),i};function o(i){i=[typeof globalThis=="object"&&globalThis,i,typeof window=="object"&&window,typeof self=="object"&&self,typeof H=="object"&&H];for(var s=0;s<i.length;++s){var c=i[s];if(c&&c.Math==Math)return c}throw Error("Cannot find global object")}var n=o(this);function l(i,s){if(s)e:{var c=n;i=i.split(".");for(var d=0;d<i.length-1;d++){var _=i[d];if(!(_ in c))break e;c=c[_]}i=i[i.length-1],d=c[i],s=s(d),s!=d&&s!=null&&r(c,i,{configurable:!0,writable:!0,value:s})}}l("Symbol",function(i){function s($){if(this instanceof s)throw new TypeError("Symbol is not a constructor");return new c(d+($||"")+"_"+_++,$)}function c($,C){this.A=$,r(this,"description",{configurable:!0,writable:!0,value:C})}if(i)return i;c.prototype.toString=function(){return this.A};var d="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",_=0;return s}),l("Symbol.iterator",function(i){if(i)return i;i=Symbol("Symbol.iterator");for(var s="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),c=0;c<s.length;c++){var d=n[s[c]];typeof d=="function"&&typeof d.prototype[i]!="function"&&r(d.prototype,i,{configurable:!0,writable:!0,value:function(){return f(t(this))}})}return i});function f(i){return i={next:i},i[Symbol.iterator]=function(){return this},i}function u(i){var s=typeof Symbol<"u"&&Symbol.iterator&&i[Symbol.iterator];return s?s.call(i):{next:t(i)}}var p;if(typeof Object.setPrototypeOf=="function")p=Object.setPrototypeOf;else{var g;e:{var m={a:!0},h={};try{h.__proto__=m,g=h.a;break e}catch{}g=!1}p=g?function(i,s){if(i.__proto__=s,i.__proto__!==s)throw new TypeError(i+" is not extensible");return i}:null}var y=p;function b(){this.m=!1,this.j=null,this.v=void 0,this.h=1,this.u=this.C=0,this.l=null}function T(i){if(i.m)throw new TypeError("Generator is already running");i.m=!0}b.prototype.o=function(i){this.v=i},b.prototype.s=function(i){this.l={D:i,F:!0},this.h=this.C||this.u},b.prototype.return=function(i){this.l={return:i},this.h=this.u};function A(i,s){return i.h=3,{value:s}}function V(i){this.g=new b,this.G=i}V.prototype.o=function(i){return T(this.g),this.g.j?J(this,this.g.j.next,i,this.g.o):(this.g.o(i),M(this))};function K(i,s){T(i.g);var c=i.g.j;return c?J(i,"return"in c?c.return:function(d){return{value:d,done:!0}},s,i.g.return):(i.g.return(s),M(i))}V.prototype.s=function(i){return T(this.g),this.g.j?J(this,this.g.j.throw,i,this.g.o):(this.g.s(i),M(this))};function J(i,s,c,d){try{var _=s.call(i.g.j,c);if(!(_ instanceof Object))throw new TypeError("Iterator result "+_+" is not an object");if(!_.done)return i.g.m=!1,_;var $=_.value}catch(C){return i.g.j=null,i.g.s(C),M(i)}return i.g.j=null,d.call(i.g,$),M(i)}function M(i){for(;i.g.h;)try{var s=i.G(i.g);if(s)return i.g.m=!1,{value:s.value,done:!1}}catch(c){i.g.v=void 0,i.g.s(c)}if(i.g.m=!1,i.g.l){if(s=i.g.l,i.g.l=null,s.F)throw s.D;return{value:s.return,done:!0}}return{value:void 0,done:!0}}function be(i){this.next=function(s){return i.o(s)},this.throw=function(s){return i.s(s)},this.return=function(s){return K(i,s)},this[Symbol.iterator]=function(){return this}}function U(i,s){return s=new be(new V(s)),y&&i.prototype&&y(s,i.prototype),s}function v(i,s){i instanceof String&&(i+="");var c=0,d=!1,_={next:function(){if(!d&&c<i.length){var $=c++;return{value:s($,i[$]),done:!1}}return d=!0,{done:!0,value:void 0}}};return _[Symbol.iterator]=function(){return _},_}if(l("Array.prototype.entries",function(i){return i||function(){return v(this,function(s,c){return[s,c]})}}),typeof Blob<"u"&&(typeof FormData>"u"||!FormData.prototype.keys)){var j=function(i,s){for(var c=0;c<i.length;c++)s(i[c])},I=function(i){return i.replace(/\r?\n|\r/g,`\r
`)},Z=function(i,s,c){return s instanceof Blob?(c=c!==void 0?c+"":typeof s.name=="string"?s.name:"blob",(s.name!==c||Object.prototype.toString.call(s)==="[object Blob]")&&(s=new File([s],c)),[String(i),s]):[String(i),String(s)]},B=function(i,s){if(i.length<s)throw new TypeError(s+" argument required, but only "+i.length+" present.")},F=typeof globalThis=="object"?globalThis:typeof window=="object"?window:typeof self=="object"?self:this,ps=F.FormData,ve=F.XMLHttpRequest&&F.XMLHttpRequest.prototype.send,ct=F.Request&&F.fetch,ut=F.navigator&&F.navigator.sendBeacon,D=F.Element&&F.Element.prototype,R=F.Symbol&&Symbol.toStringTag;R&&(Blob.prototype[R]||(Blob.prototype[R]="Blob"),"File"in F&&!File.prototype[R]&&(File.prototype[R]="File"));try{new File([],"")}catch{F.File=function(s,c,d){return s=new Blob(s,d||{}),Object.defineProperties(s,{name:{value:c},lastModified:{value:+(d&&d.lastModified!==void 0?new Date(d.lastModified):new Date)},toString:{value:function(){return"[object File]"}}}),R&&Object.defineProperty(s,R,{value:"File"}),s}}var we=function(i){return i.replace(/\n/g,"%0A").replace(/\r/g,"%0D").replace(/"/g,"%22")},x=function(i){this.i=[];var s=this;i&&j(i.elements,function(c){if(c.name&&!c.disabled&&c.type!=="submit"&&c.type!=="button"&&!c.matches("form fieldset[disabled] *"))if(c.type==="file"){var d=c.files&&c.files.length?c.files:[new File([],"",{type:"application/octet-stream"})];j(d,function(_){s.append(c.name,_)})}else c.type==="select-multiple"||c.type==="select-one"?j(c.options,function(_){!_.disabled&&_.selected&&s.append(c.name,_.value)}):c.type==="checkbox"||c.type==="radio"?c.checked&&s.append(c.name,c.value):(d=c.type==="textarea"?I(c.value):c.value,s.append(c.name,d))})};if(e=x.prototype,e.append=function(i,s,c){B(arguments,2),this.i.push(Z(i,s,c))},e.delete=function(i){B(arguments,1);var s=[];i=String(i),j(this.i,function(c){c[0]!==i&&s.push(c)}),this.i=s},e.entries=function i(){var s,c=this;return U(i,function(d){if(d.h==1&&(s=0),d.h!=3)return s<c.i.length?d=A(d,c.i[s]):(d.h=0,d=void 0),d;s++,d.h=2})},e.forEach=function(i,s){B(arguments,1);for(var c=u(this),d=c.next();!d.done;d=c.next()){var _=u(d.value);d=_.next().value,_=_.next().value,i.call(s,_,d,this)}},e.get=function(i){B(arguments,1);var s=this.i;i=String(i);for(var c=0;c<s.length;c++)if(s[c][0]===i)return s[c][1];return null},e.getAll=function(i){B(arguments,1);var s=[];return i=String(i),j(this.i,function(c){c[0]===i&&s.push(c[1])}),s},e.has=function(i){B(arguments,1),i=String(i);for(var s=0;s<this.i.length;s++)if(this.i[s][0]===i)return!0;return!1},e.keys=function i(){var s=this,c,d,_,$,C;return U(i,function(E){if(E.h==1&&(c=u(s),d=c.next()),E.h!=3){if(d.done){E.h=0;return}return _=d.value,$=u(_),C=$.next().value,A(E,C)}d=c.next(),E.h=2})},e.set=function(i,s,c){B(arguments,2),i=String(i);var d=[],_=Z(i,s,c),$=!0;j(this.i,function(C){C[0]===i?$&&($=!d.push(_)):d.push(C)}),$&&d.push(_),this.i=d},e.values=function i(){var s=this,c,d,_,$,C;return U(i,function(E){if(E.h==1&&(c=u(s),d=c.next()),E.h!=3){if(d.done){E.h=0;return}return _=d.value,$=u(_),$.next(),C=$.next().value,A(E,C)}d=c.next(),E.h=2})},x.prototype._asNative=function(){for(var i=new ps,s=u(this),c=s.next();!c.done;c=s.next()){var d=u(c.value);c=d.next().value,d=d.next().value,i.append(c,d)}return i},x.prototype._blob=function(){var i="----formdata-polyfill-"+Math.random(),s=[],c="--"+i+`\r
Content-Disposition: form-data; name="`;return this.forEach(function(d,_){return typeof d=="string"?s.push(c+we(I(_))+(`"\r
\r
`+I(d)+`\r
`)):s.push(c+we(I(_))+('"; filename="'+we(d.name)+`"\r
Content-Type: `+(d.type||"application/octet-stream")+`\r
\r
`),d,`\r
`)}),s.push("--"+i+"--"),new Blob(s,{type:"multipart/form-data; boundary="+i})},x.prototype[Symbol.iterator]=function(){return this.entries()},x.prototype.toString=function(){return"[object FormData]"},D&&!D.matches&&(D.matches=D.matchesSelector||D.mozMatchesSelector||D.msMatchesSelector||D.oMatchesSelector||D.webkitMatchesSelector||function(i){i=(this.document||this.ownerDocument).querySelectorAll(i);for(var s=i.length;0<=--s&&i.item(s)!==this;);return-1<s}),R&&(x.prototype[R]="FormData"),ve){var ys=F.XMLHttpRequest.prototype.setRequestHeader;F.XMLHttpRequest.prototype.setRequestHeader=function(i,s){ys.call(this,i,s),i.toLowerCase()==="content-type"&&(this.B=!0)},F.XMLHttpRequest.prototype.send=function(i){i instanceof x?(i=i._blob(),this.B||this.setRequestHeader("Content-Type",i.type),ve.call(this,i)):ve.call(this,i)}}ct&&(F.fetch=function(i,s){return s&&s.body&&s.body instanceof x&&(s.body=s.body._blob()),ct.call(this,i,s)}),ut&&(F.navigator.sendBeacon=function(i,s){return s instanceof x&&(s=s._asNative()),ut.call(this,i,s)}),F.FormData=x}})();const Ae="%[a-f0-9]{2}",Ee=new RegExp("("+Ae+")|([^%]+?)","gi"),Ie=new RegExp("("+Ae+")+","gi");function he(e,t){try{return[decodeURIComponent(e.join(""))]}catch{}if(e.length===1)return e;t=t||1;const r=e.slice(0,t),o=e.slice(t);return Array.prototype.concat.call([],he(r),he(o))}function gr(e){try{return decodeURIComponent(e)}catch{let t=e.match(Ee)||[];for(let r=1;r<t.length;r++)e=he(t,r).join(""),t=e.match(Ee)||[];return e}}function _r(e){const t={"%FE%FF":"��","%FF%FE":"��"};let r=Ie.exec(e);for(;r;){try{t[r[0]]=decodeURIComponent(r[0])}catch{const n=gr(r[0]);n!==r[0]&&(t[r[0]]=n)}r=Ie.exec(e)}t["%C2"]="�";const o=Object.keys(t);for(const n of o)e=e.replace(new RegExp(n,"g"),t[n]);return e}function br(e){if(typeof e!="string")throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof e+"`");try{return decodeURIComponent(e)}catch{return _r(e)}}function xe(e,t){if(!(typeof e=="string"&&typeof t=="string"))throw new TypeError("Expected the arguments to be of type `string`");if(e===""||t==="")return[];const r=e.indexOf(t);return r===-1?[]:[e.slice(0,r),e.slice(r+t.length)]}function vr(e,t){const r={};if(Array.isArray(t))for(const o of t){const n=Object.getOwnPropertyDescriptor(e,o);n!=null&&n.enumerable&&Object.defineProperty(r,o,n)}else for(const o of Reflect.ownKeys(e)){const n=Object.getOwnPropertyDescriptor(e,o);if(n.enumerable){const l=e[o];t(o,l,e)&&Object.defineProperty(r,o,n)}}return r}const wr=e=>e==null,$r=e=>encodeURIComponent(e).replaceAll(/[!'()*]/g,t=>`%${t.charCodeAt(0).toString(16).toUpperCase()}`),de=Symbol("encodeFragmentIdentifier");function Sr(e){switch(e.arrayFormat){case"index":return t=>(r,o)=>{const n=r.length;return o===void 0||e.skipNull&&o===null||e.skipEmptyString&&o===""?r:o===null?[...r,[w(t,e),"[",n,"]"].join("")]:[...r,[w(t,e),"[",w(n,e),"]=",w(o,e)].join("")]};case"bracket":return t=>(r,o)=>o===void 0||e.skipNull&&o===null||e.skipEmptyString&&o===""?r:o===null?[...r,[w(t,e),"[]"].join("")]:[...r,[w(t,e),"[]=",w(o,e)].join("")];case"colon-list-separator":return t=>(r,o)=>o===void 0||e.skipNull&&o===null||e.skipEmptyString&&o===""?r:o===null?[...r,[w(t,e),":list="].join("")]:[...r,[w(t,e),":list=",w(o,e)].join("")];case"comma":case"separator":case"bracket-separator":{const t=e.arrayFormat==="bracket-separator"?"[]=":"=";return r=>(o,n)=>n===void 0||e.skipNull&&n===null||e.skipEmptyString&&n===""?o:(n=n===null?"":n,o.length===0?[[w(r,e),t,w(n,e)].join("")]:[[o,w(n,e)].join(e.arrayFormatSeparator)])}default:return t=>(r,o)=>o===void 0||e.skipNull&&o===null||e.skipEmptyString&&o===""?r:o===null?[...r,w(t,e)]:[...r,[w(t,e),"=",w(o,e)].join("")]}}function Fr(e){let t;switch(e.arrayFormat){case"index":return(r,o,n)=>{if(t=/\[(\d*)]$/.exec(r),r=r.replace(/\[\d*]$/,""),!t){n[r]=o;return}n[r]===void 0&&(n[r]={}),n[r][t[1]]=o};case"bracket":return(r,o,n)=>{if(t=/(\[])$/.exec(r),r=r.replace(/\[]$/,""),!t){n[r]=o;return}if(n[r]===void 0){n[r]=[o];return}n[r]=[...n[r],o]};case"colon-list-separator":return(r,o,n)=>{if(t=/(:list)$/.exec(r),r=r.replace(/:list$/,""),!t){n[r]=o;return}if(n[r]===void 0){n[r]=[o];return}n[r]=[...n[r],o]};case"comma":case"separator":return(r,o,n)=>{const l=typeof o=="string"&&o.includes(e.arrayFormatSeparator),f=typeof o=="string"&&!l&&P(o,e).includes(e.arrayFormatSeparator);o=f?P(o,e):o;const u=l||f?o.split(e.arrayFormatSeparator).map(p=>P(p,e)):o===null?o:P(o,e);n[r]=u};case"bracket-separator":return(r,o,n)=>{const l=/(\[])$/.test(r);if(r=r.replace(/\[]$/,""),!l){n[r]=o&&P(o,e);return}const f=o===null?[]:o.split(e.arrayFormatSeparator).map(u=>P(u,e));if(n[r]===void 0){n[r]=f;return}n[r]=[...n[r],...f]};default:return(r,o,n)=>{if(n[r]===void 0){n[r]=o;return}n[r]=[...[n[r]].flat(),o]}}}function Pe(e){if(typeof e!="string"||e.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function w(e,t){return t.encode?t.strict?$r(e):encodeURIComponent(e):e}function P(e,t){return t.decode?br(e):e}function Re(e){return Array.isArray(e)?e.sort():typeof e=="object"?Re(Object.keys(e)).sort((t,r)=>Number(t)-Number(r)).map(t=>e[t]):e}function De(e){const t=e.indexOf("#");return t!==-1&&(e=e.slice(0,t)),e}function Or(e){let t="";const r=e.indexOf("#");return r!==-1&&(t=e.slice(r)),t}function Le(e,t){return t.parseNumbers&&!Number.isNaN(Number(e))&&typeof e=="string"&&e.trim()!==""?e=Number(e):t.parseBooleans&&e!==null&&(e.toLowerCase()==="true"||e.toLowerCase()==="false")&&(e=e.toLowerCase()==="true"),e}function pe(e){e=De(e);const t=e.indexOf("?");return t===-1?"":e.slice(t+1)}function ye(e,t){t={decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1,...t},Pe(t.arrayFormatSeparator);const r=Fr(t),o=Object.create(null);if(typeof e!="string"||(e=e.trim().replace(/^[?#&]/,""),!e))return o;for(const n of e.split("&")){if(n==="")continue;const l=t.decode?n.replaceAll("+"," "):n;let[f,u]=xe(l,"=");f===void 0&&(f=l),u=u===void 0?null:["comma","separator","bracket-separator"].includes(t.arrayFormat)?u:P(u,t),r(P(f,t),u,o)}for(const[n,l]of Object.entries(o))if(typeof l=="object"&&l!==null)for(const[f,u]of Object.entries(l))l[f]=Le(u,t);else o[n]=Le(l,t);return t.sort===!1?o:(t.sort===!0?Object.keys(o).sort():Object.keys(o).sort(t.sort)).reduce((n,l)=>{const f=o[l];return n[l]=f&&typeof f=="object"&&!Array.isArray(f)?Re(f):f,n},Object.create(null))}function ke(e,t){if(!e)return"";t={encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:",",...t},Pe(t.arrayFormatSeparator);const r=f=>t.skipNull&&wr(e[f])||t.skipEmptyString&&e[f]==="",o=Sr(t),n={};for(const[f,u]of Object.entries(e))r(f)||(n[f]=u);const l=Object.keys(n);return t.sort!==!1&&l.sort(t.sort),l.map(f=>{const u=e[f];return u===void 0?"":u===null?w(f,t):Array.isArray(u)?u.length===0&&t.arrayFormat==="bracket-separator"?w(f,t)+"[]":u.reduce(o(f),[]).join("&"):w(f,t)+"="+w(u,t)}).filter(f=>f.length>0).join("&")}function Me(e,t){var n;t={decode:!0,...t};let[r,o]=xe(e,"#");return r===void 0&&(r=e),{url:((n=r==null?void 0:r.split("?"))==null?void 0:n[0])??"",query:ye(pe(e),t),...t&&t.parseFragmentIdentifier&&o?{fragmentIdentifier:P(o,t)}:{}}}function Ue(e,t){t={encode:!0,strict:!0,[de]:!0,...t};const r=De(e.url).split("?")[0]||"",o=pe(e.url),n={...ye(o,{sort:!1}),...e.query};let l=ke(n,t);l&&(l=`?${l}`);let f=Or(e.url);if(typeof e.fragmentIdentifier=="string"){const u=new URL(r);u.hash=e.fragmentIdentifier,f=t[de]?u.hash:`#${e.fragmentIdentifier}`}return`${r}${l}${f}`}function Be(e,t,r){r={parseFragmentIdentifier:!0,[de]:!1,...r};const{url:o,query:n,fragmentIdentifier:l}=Me(e,r);return Ue({url:o,query:vr(n,t),fragmentIdentifier:l},r)}function jr(e,t,r){const o=Array.isArray(t)?n=>!t.includes(n):(n,l)=>!t(n,l);return Be(e,o,r)}const L=Object.freeze(Object.defineProperty({__proto__:null,exclude:jr,extract:pe,parse:ye,parseUrl:Me,pick:Be,stringify:ke,stringifyUrl:Ue},Symbol.toStringTag,{value:"Module"}));function Tr(e,t){for(var r=-1,o=t.length,n=e.length;++r<o;)e[n+r]=t[r];return e}var Cr=Tr,Ar=le,Er=X,Ir="[object Arguments]";function xr(e){return Er(e)&&Ar(e)==Ir}var Pr=xr,Ne=Pr,Rr=X,He=Object.prototype,Dr=He.hasOwnProperty,Lr=He.propertyIsEnumerable,kr=Ne(function(){return arguments}())?Ne:function(e){return Rr(e)&&Dr.call(e,"callee")&&!Lr.call(e,"callee")},Mr=kr,Ur=Array.isArray,Br=Ur,qe=se,Nr=Mr,Hr=Br,Ge=qe?qe.isConcatSpreadable:void 0;function qr(e){return Hr(e)||Nr(e)||!!(Ge&&e&&e[Ge])}var Gr=qr,zr=Cr,Vr=Gr;function ze(e,t,r,o,n){var l=-1,f=e.length;for(r||(r=Vr),n||(n=[]);++l<f;){var u=e[l];t>0&&r(u)?t>1?ze(u,t-1,r,o,n):zr(n,u):o||(n[n.length]=u)}return n}var Kr=ze;function Jr(e){return e}var Ve=Jr;function Wr(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}var Yr=Wr,Zr=Yr,Ke=Math.max;function Qr(e,t,r){return t=Ke(t===void 0?e.length-1:t,0),function(){for(var o=arguments,n=-1,l=Ke(o.length-t,0),f=Array(l);++n<l;)f[n]=o[t+n];n=-1;for(var u=Array(t+1);++n<t;)u[n]=o[n];return u[t]=r(f),Zr(e,this,u)}}var Xr=Qr;function en(e){return function(){return e}}var tn=en,rn=le,nn=Q,on="[object AsyncFunction]",an="[object Function]",sn="[object GeneratorFunction]",ln="[object Proxy]";function cn(e){if(!nn(e))return!1;var t=rn(e);return t==an||t==sn||t==on||t==ln}var Je=cn,un=W,fn=un["__core-js_shared__"],hn=fn,me=hn,We=function(){var e=/[^.]+$/.exec(me&&me.keys&&me.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function dn(e){return!!We&&We in e}var pn=dn,yn=Function.prototype,mn=yn.toString;function gn(e){if(e!=null){try{return mn.call(e)}catch{}try{return e+""}catch{}}return""}var _n=gn,bn=Je,vn=pn,wn=Q,$n=_n,Sn=/[\\^$.*+?()[\]{}|]/g,Fn=/^\[object .+?Constructor\]$/,On=Function.prototype,jn=Object.prototype,Tn=On.toString,Cn=jn.hasOwnProperty,An=RegExp("^"+Tn.call(Cn).replace(Sn,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function En(e){if(!wn(e)||vn(e))return!1;var t=bn(e)?An:Fn;return t.test($n(e))}var In=En;function xn(e,t){return e==null?void 0:e[t]}var Pn=xn,Rn=In,Dn=Pn;function Ln(e,t){var r=Dn(e,t);return Rn(r)?r:void 0}var ee=Ln,kn=ee,Mn=function(){try{var e=kn(Object,"defineProperty");return e({},"",{}),e}catch{}}(),Un=Mn,Bn=tn,Ye=Un,Nn=Ve,Hn=Ye?function(e,t){return Ye(e,"toString",{configurable:!0,enumerable:!1,value:Bn(t),writable:!0})}:Nn,qn=Hn,Gn=800,zn=16,Vn=Date.now;function Kn(e){var t=0,r=0;return function(){var o=Vn(),n=zn-(o-r);if(r=o,n>0){if(++t>=Gn)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var Jn=Kn,Wn=qn,Yn=Jn,Zn=Yn(Wn),Qn=Zn,Xn=Ve,eo=Xr,to=Qn;function ro(e,t){return to(eo(e,t,Xn),e+"")}var Ze=ro,no=ee,oo=no(Object,"create"),te=oo,Qe=te;function io(){this.__data__=Qe?Qe(null):{},this.size=0}var ao=io;function so(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var lo=so,co=te,uo="__lodash_hash_undefined__",fo=Object.prototype,ho=fo.hasOwnProperty;function po(e){var t=this.__data__;if(co){var r=t[e];return r===uo?void 0:r}return ho.call(t,e)?t[e]:void 0}var yo=po,mo=te,go=Object.prototype,_o=go.hasOwnProperty;function bo(e){var t=this.__data__;return mo?t[e]!==void 0:_o.call(t,e)}var vo=bo,wo=te,$o="__lodash_hash_undefined__";function So(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=wo&&t===void 0?$o:t,this}var Fo=So,Oo=ao,jo=lo,To=yo,Co=vo,Ao=Fo;function q(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var o=e[t];this.set(o[0],o[1])}}q.prototype.clear=Oo,q.prototype.delete=jo,q.prototype.get=To,q.prototype.has=Co,q.prototype.set=Ao;var Eo=q;function Io(){this.__data__=[],this.size=0}var xo=Io;function Po(e,t){return e===t||e!==e&&t!==t}var Ro=Po,Do=Ro;function Lo(e,t){for(var r=e.length;r--;)if(Do(e[r][0],t))return r;return-1}var re=Lo,ko=re,Mo=Array.prototype,Uo=Mo.splice;function Bo(e){var t=this.__data__,r=ko(t,e);if(r<0)return!1;var o=t.length-1;return r==o?t.pop():Uo.call(t,r,1),--this.size,!0}var No=Bo,Ho=re;function qo(e){var t=this.__data__,r=Ho(t,e);return r<0?void 0:t[r][1]}var Go=qo,zo=re;function Vo(e){return zo(this.__data__,e)>-1}var Ko=Vo,Jo=re;function Wo(e,t){var r=this.__data__,o=Jo(r,e);return o<0?(++this.size,r.push([e,t])):r[o][1]=t,this}var Yo=Wo,Zo=xo,Qo=No,Xo=Go,ei=Ko,ti=Yo;function G(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var o=e[t];this.set(o[0],o[1])}}G.prototype.clear=Zo,G.prototype.delete=Qo,G.prototype.get=Xo,G.prototype.has=ei,G.prototype.set=ti;var ri=G,ni=ee,oi=W,ii=ni(oi,"Map"),ai=ii,Xe=Eo,si=ri,li=ai;function ci(){this.size=0,this.__data__={hash:new Xe,map:new(li||si),string:new Xe}}var ui=ci;function fi(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var hi=fi,di=hi;function pi(e,t){var r=e.__data__;return di(t)?r[typeof t=="string"?"string":"hash"]:r.map}var ne=pi,yi=ne;function mi(e){var t=yi(this,e).delete(e);return this.size-=t?1:0,t}var gi=mi,_i=ne;function bi(e){return _i(this,e).get(e)}var vi=bi,wi=ne;function $i(e){return wi(this,e).has(e)}var Si=$i,Fi=ne;function Oi(e,t){var r=Fi(this,e),o=r.size;return r.set(e,t),this.size+=r.size==o?0:1,this}var ji=Oi,Ti=ui,Ci=gi,Ai=vi,Ei=Si,Ii=ji;function z(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var o=e[t];this.set(o[0],o[1])}}z.prototype.clear=Ti,z.prototype.delete=Ci,z.prototype.get=Ai,z.prototype.has=Ei,z.prototype.set=Ii;var xi=z,Pi="__lodash_hash_undefined__";function Ri(e){return this.__data__.set(e,Pi),this}var Di=Ri;function Li(e){return this.__data__.has(e)}var ki=Li,Mi=xi,Ui=Di,Bi=ki;function oe(e){var t=-1,r=e==null?0:e.length;for(this.__data__=new Mi;++t<r;)this.add(e[t])}oe.prototype.add=oe.prototype.push=Ui,oe.prototype.has=Bi;var et=oe;function Ni(e,t,r,o){for(var n=e.length,l=r+(o?1:-1);o?l--:++l<n;)if(t(e[l],l,e))return l;return-1}var Hi=Ni;function qi(e){return e!==e}var Gi=qi;function zi(e,t,r){for(var o=r-1,n=e.length;++o<n;)if(e[o]===t)return o;return-1}var Vi=zi,Ki=Hi,Ji=Gi,Wi=Vi;function Yi(e,t,r){return t===t?Wi(e,t,r):Ki(e,Ji,r)}var Zi=Yi,Qi=Zi;function Xi(e,t){var r=e==null?0:e.length;return!!r&&Qi(e,t,0)>-1}var tt=Xi;function ea(e,t,r){for(var o=-1,n=e==null?0:e.length;++o<n;)if(r(t,e[o]))return!0;return!1}var rt=ea;function ta(e,t){return e.has(t)}var nt=ta,ra=ee,na=W,oa=ra(na,"Set"),ia=oa;function aa(){}var sa=aa;function la(e){var t=-1,r=Array(e.size);return e.forEach(function(o){r[++t]=o}),r}var ot=la,ge=ia,ca=sa,ua=ot,fa=1/0,ha=ge&&1/ua(new ge([,-0]))[1]==fa?function(e){return new ge(e)}:ca,da=ha,pa=et,ya=tt,ma=rt,ga=nt,_a=da,ba=ot,va=200;function wa(e,t,r){var o=-1,n=ya,l=e.length,f=!0,u=[],p=u;if(r)f=!1,n=ma;else if(l>=va){var g=t?null:_a(e);if(g)return ba(g);f=!1,n=ga,p=new pa}else p=t?[]:u;e:for(;++o<l;){var m=e[o],h=t?t(m):m;if(m=r||m!==0?m:0,f&&h===h){for(var y=p.length;y--;)if(p[y]===h)continue e;t&&p.push(h),u.push(m)}else n(p,h,r)||(p!==u&&p.push(h),u.push(m))}return u}var $a=wa,Sa=9007199254740991;function Fa(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=Sa}var Oa=Fa,ja=Je,Ta=Oa;function Ca(e){return e!=null&&Ta(e.length)&&!ja(e)}var Aa=Ca,Ea=Aa,Ia=X;function xa(e){return Ia(e)&&Ea(e)}var it=xa,Pa=Kr,Ra=Ze,Da=$a,La=it,ka=Ra(function(e){return Da(Pa(e,1,La,!0))}),Ma=ka;const Ua=ae(Ma);function Ba(e,t){for(var r=-1,o=e==null?0:e.length,n=Array(o);++r<o;)n[r]=t(e[r],r,e);return n}var Na=Ba;function Ha(e){return function(t){return e(t)}}var qa=Ha,Ga=et,za=tt,Va=rt,Ka=Na,Ja=qa,Wa=nt,Ya=200;function Za(e,t,r,o){var n=-1,l=za,f=!0,u=e.length,p=[],g=t.length;if(!u)return p;r&&(t=Ka(t,Ja(r))),o?(l=Va,f=!1):t.length>=Ya&&(l=Wa,f=!1,t=new Ga(t));e:for(;++n<u;){var m=e[n],h=r==null?m:r(m);if(m=o||m!==0?m:0,f&&h===h){for(var y=g;y--;)if(t[y]===h)continue e;p.push(m)}else l(t,h,o)||p.push(m)}return p}var Qa=Za,Xa=Qa,es=Ze,ts=it,rs=es(function(e,t){return ts(e)?Xa(e,t):[]}),ns=rs;const os=ae(ns);function is(e,t){const r=e.location,o=L.parseUrl((r==null?void 0:r.url)||t,{arrayFormat:"comma",parseFragmentIdentifier:!0}),n={};let l;if(r){if(r.stringQuery){const h=L.parse(r.stringQuery,{arrayFormat:"comma"});r.query={...h,...r.query}}if(r.mergeQuery){const h=r.clearMergeQueryKeys||[];for(const[y,b]of Object.entries(o.query))h.indexOf(y.split(".")[0])<0&&(n[y]=b);r.query||(r.query={})}l=r.query}const f=l||o.query;let u="";for(const[h,y]of Object.entries(f))Array.isArray(y)?n[h]=y:typeof y=="object"?as(n,h,y):n[h]=y;const p={...n,__execute_event__:e.id};for(const[h,y]of Object.entries(p))(y==null||y==="")&&delete p[h];u=L.stringify(n,{arrayFormat:"comma"}),u.length>0&&(u=`?${u}`);let g=o.url+u;return o.fragmentIdentifier&&(g=g+"#"+o.fragmentIdentifier),{pushStateArgs:[{query:n,url:g},"",g],eventURL:`${o.url}?${L.stringify(p,{arrayFormat:"comma"})}`}}function as(e,t,r){if(!r.value)return;let o=r.value;Array.isArray(r.value)||(o=[r.value]);let n=e[t];if(n&&!Array.isArray(n)&&(n=[n]),r.add){e[t]=Ua(n,o);return}if(r.remove){const l=os(n,...o);l.length===0?delete e[t]:e[t]=l}}function ie(e,t,r){if(!t||t.length===0)return!1;if(r instanceof Event)return ie(e,t,r.target);if(r instanceof HTMLInputElement){if(r.files)return ie(e,t,r.files);switch(r.type){case"checkbox":return r.checked?k(e,t,r.value):e.has(t)?(e.delete(t),!0):!1;case"radio":return r.checked?k(e,t,r.value):!1;default:return k(e,t,r.value)}}if(r instanceof HTMLTextAreaElement||r instanceof HTMLSelectElement)return k(e,t,r.value);if(r==null)return k(e,t,"");let o=!1;if(e.has(t)&&(o=!0,e.delete(t)),Array.isArray(r)||r instanceof FileList){for(let n=0;n<r.length;n++)r[n]instanceof File?(o=!0,e.append(t,r[n],r[n].name)):(o=!0,e.append(t,r[n]));return o}return r instanceof File?(e.set(t,r,r.name),!0):k(e,t,r)}function k(e,t,r){return e.get(t)===r?!1:(e.set(t,r),!0)}function at(e,t,r=""){if(e==null)return;const o=Array.isArray(e);if(o&&e.length>0&&(e[0]instanceof File||e[0]instanceof Blob)){ie(t,r,e);return}return Object.keys(e).forEach(n=>{if(n==="$parent")return;const l=e[n],f=r?o?`${r}[${n}]`:`${r}.${n}`:n;typeof l=="object"&&!(l instanceof File)&&!(l instanceof Date)?at(l,t,f):ie(t,f,l)}),t}class ss{constructor(){S(this,"_eventFuncID",{id:"__reload__"});S(this,"_url");S(this,"_method");S(this,"_vars");S(this,"_locals");S(this,"_closer");S(this,"_scope",{});S(this,"_loadPortalBody",!1);S(this,"_form",{});S(this,"_popstate");S(this,"_pushState");S(this,"_location");S(this,"_updateRootTemplate");S(this,"_buildPushStateResult");S(this,"_parents");S(this,"ignoreErrors",["Failed to fetch","NetworkError when attempting to fetch resource.","The Internet connection appears to be offline.","Network request failed"]);S(this,"isIgnoreError",t=>{var r;return t instanceof Error?(r=this.ignoreErrors)==null?void 0:r.includes(t.message):!1});S(this,"runScript",t=>(t.runScript&&new Function("vars","locals","form","closer","scope","plaid",t.runScript).apply(this,[this._vars,this._locals,this._form,this._closer,this._scope,()=>_e().vars(this._vars).locals(this._locals).form(this._form).closer(this._closer).updateRootTemplate(this._updateRootTemplate)]),t))}eventFunc(t){return this._eventFuncID.id=t,this}updateRootTemplate(t){return this._updateRootTemplate=t,this}eventFuncID(t){return this._eventFuncID=t,this}reload(){return this._eventFuncID.id="__reload__",this}url(t){return this._url=t,this}vars(t){return this._vars=t,this}closer(t){return this._closer=t,this}loadPortalBody(t){return this._loadPortalBody=t,this}locals(t){return this._locals=t,this}query(t,r){return this._location||(this._location={}),this._location.query||(this._location.query={}),this._location.query[t]=r,this}mergeQuery(t){return this._location||(this._location={}),this._location.mergeQuery=t,this}clearMergeQuery(t){return this._location||(this._location={}),this._location.mergeQuery=!0,this._location.clearMergeQueryKeys=t,this}location(t){return this._location=t,this}stringQuery(t){return this._location||(this._location={}),this._location.stringQuery=t,this}pushState(t){return this._pushState=t,this}queries(t){return this._location||(this._location={}),this._location.query=t,this}pushStateURL(t){return this._location||(this._location={}),this._location.url=t,this.pushState(!0),this}form(t){return this._form=t,this}scope(t){return this._scope=t,this}fieldValue(t,r){if(!this._form)throw new Error("form not exist");return this._form[t]=r,this}popstate(t){return this._popstate=t,this}run(t){return new Function(t).apply(this),this}method(t){return this._method=t,this}parent(t,r){return this._parents=this._parents||{},this._parents[t]=r,this}buildFetchURL(){return this.ensurePushStateResult(),this._buildPushStateResult.eventURL}buildPushStateArgs(){return this.ensurePushStateResult(),this._buildPushStateResult.pushStateArgs}onpopstate(t){return t.state?this.popstate(!0).location(t.state).reload().go():Promise.reject("event state is undefined")}runPushState(){if(this._popstate!==!0&&this._pushState===!0){window.history.length<=2&&window.history.pushState({url:window.location.href},"",window.location.href);const t=this.buildPushStateArgs();t&&window.history.pushState(...t)}}async fetch(){this._eventFuncID.id=="__reload__"&&(this._buildPushStateResult=null);const t={method:"POST",redirect:"follow"};if(this._method&&(t.method=this._method),t.method==="POST"){const n=new FormData;at(this._form,n),t.body=n}window.dispatchEvent(new Event("fetchStart"));const r=this.buildFetchURL();let o={};try{const n=await fetch(r,t).catch(l=>{console.error(l),Promise.reject(l),this.isIgnoreError(l)||alert("Fetch Unknown Error: "+l)});if(!n)return o;if(!n.ok)return this._vars.presetsMessage={show:!0,message:`Server Response Error: <code>${n.status}</code> (${n.statusText}). See window console for detail.`,color:"error"},Promise.reject(new Error(`Response status: ${n.status} ${n.statusText}`)),o;if(n.redirected)return document.location.replace(n.url),o;o=await n.json()}finally{window.dispatchEvent(new Event("fetchEnd"))}return o}go(){return this.goPre(t=>null)}goPre(t){return t(this),this.runPushState(),this.fetch().then(this.runScript).then(r=>{if(r.pageTitle&&(document.title=r.pageTitle),r.redirectURL&&document.location.replace(r.redirectURL),r.reloadPortals&&r.reloadPortals.length>0)for(const o of r.reloadPortals){const n=window.__goplaid.portals[o];n&&n.reload()}if(r.updatePortals&&r.updatePortals.length>0)for(const o of r.updatePortals)if(window.__goplaid.portals[o.name]){const{updatePortalTemplate:n}=window.__goplaid.portals[o.name];n&&n(o.body)}else o.defer?setTimeout(n=>{if(window.__goplaid.portals[n.name]){const{updatePortalTemplate:l}=window.__goplaid.portals[n.name];l&&l(n.body)}else console.error("go-plaid-portal defered '"+n.name+"' does not exists.")},10,o):console.error("go-plaid-portal '"+o.name+"' does not exists.");return r.pushState?_e().updateRootTemplate(this._updateRootTemplate).reload().pushState(!0).location(r.pushState).go():(this._loadPortalBody&&r.body||r.body&&this._updateRootTemplate(r.body),r)})}json(){return this.fetch().then(t=>t.data)}ensurePushStateResult(){if(this._buildPushStateResult)return;const t=window.location.href;let r=this._url;r&&this._parents&&Object.keys(this._parents).forEach(n=>{r=r.replace("{parent_"+n+"_id}",this._parents[n].toString())}),this._buildPushStateResult=is({...this._eventFuncID,location:this._location},r||t)}}function _e(){return new ss}const ls={mounted:(e,t,r)=>{var g,m;let o=e;r.component&&(o=(m=(g=r.component)==null?void 0:g.proxy)==null?void 0:m.$el);const n=t.arg||"scroll",f=L.parse(location.hash)[n];let u="";Array.isArray(f)?u=f[0]||"":u=f||"";const p=u.split("_");p.length>=2&&(o.scrollTop=parseInt(p[0]),o.scrollLeft=parseInt(p[1])),o.addEventListener("scroll",ue(function(){const h=L.parse(location.hash);h[n]=o.scrollTop+"_"+o.scrollLeft,location.hash=L.stringify(h)},200))}},cs={mounted:(e,t)=>{const[r,o]=t.value;Object.assign(r,o)}},us=a.defineComponent({props:{initialTemplate:{type:String,required:!0}},setup(e,{emit:t,attrs:r,expose:o}){const n=a.shallowRef(null),l=a.reactive({});a.provide("form",l);const f=a.reactive({});a.provide("locals",f);const u=a.reactive({});a.provide("closer",u),a.reactive({}),a.provide("fullscreen",f);const p=a.reactive({__notification:{}});a.provide("vars",p);const g=()=>_e().updateRootTemplate(h).vars(p);a.provide("plaid",g);const m=a.ref(!1);a.provide("isFetching",m);const h=y=>{n.value=fe(y,l,f)};return a.provide("updateRootTemplate",h),a.onMounted(()=>{h(e.initialTemplate),window.addEventListener("fetchStart",y=>{m.value=!0}),window.addEventListener("fetchEnd",y=>{m.value=!1}),window.addEventListener("popstate",y=>{y&&y.state!=null&&g().onpopstate(y)})}),{current:n}},template:`
      <div id="app" v-cloak>
        <component :is="current"></component>
      </div>
    `}),fs={install(e){e.component("GoPlaidScope",hr),e.component("GoPlaidPortal",pr),e.component("GoPlaidRunScript",yr),e.component("UserComponent",mr),e.directive("keep-scroll",ls),e.directive("assign",cs),e.component("GlobalEvents",pt)}};function hs(e){const t=a.createApp(us,{initialTemplate:e}),r=a.ref(!1),o=n=>{window.navigator.clipboard.writeText(n),r.value=!0,window.setTimeout(()=>{r.value=!1},1e3)};return t.config.globalProperties.copyToClipboard=o,t.config.globalProperties.copiedToClipboard=r,t.use(fs),t}const st=document.getElementById("app");if(!st)throw new Error("#app required");const ds={},lt=hs(st.innerHTML);for(const e of window.__goplaidVueComponentRegisters||[])e(lt,ds);lt.mount("#app")});
